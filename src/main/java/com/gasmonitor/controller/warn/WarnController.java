package com.gasmonitor.controller.warn;import com.gasmonitor.entity.DeviceWarnEvent;import com.gasmonitor.entity.SessionUser;import com.gasmonitor.service.device.DeviceService;import com.gasmonitor.service.warn.WarnEventService;import com.gasmonitor.vo.AjaxResult;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.domain.Page;import org.springframework.stereotype.Controller;import org.springframework.ui.ModelMap;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;/** * Created by saplmm on 2017/8/28. * 处理报警事件 */@Controller@RequestMapping("warn")public class WarnController {    @Autowired    private WarnEventService warnEventService;    @RequestMapping("list")    public String list() {        return "warn/list";    }    @RequestMapping("ajax/list")    @ResponseBody    public AjaxResult<DeviceWarnEvent> ajaxList(Integer s, Integer currPage) {        Page<DeviceWarnEvent> events = warnEventService.findByTenantId(s, currPage);        return AjaxResult.NewAjaxResult(events);    }    @RequestMapping("ajax/handler")    @ResponseBody    public AjaxResult<DeviceWarnEvent> hanler(Integer handlerType, Long warnId, String msg, boolean all) {        warnEventService.updateWarn(warnId, handlerType, msg, all);        DeviceWarnEvent e = warnEventService.findOne(warnId);        return AjaxResult.NewAjaxResult(e);    }}