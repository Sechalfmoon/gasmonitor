package com.gasmonitor.controller.warn;import com.gasmonitor.entity.DeviceWarnEvent;import com.gasmonitor.service.warn.WarnEventService;import com.gasmonitor.vo.AjaxResult;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.ResponseBody;import java.util.List;/** * Created by saplmm on 2017/8/28. * 处理报警事件 */@Controller@RequestMapping("warn")public class WarnController {    private Logger logger = LoggerFactory.getLogger(WarnController.class);    @Autowired    private WarnEventService warnEventService;    @RequestMapping("list")    public String list() {        return "warn/list";    }    @RequestMapping("ajax/list")    @ResponseBody    public AjaxResult<DeviceWarnEvent> ajaxList(Integer s) {        logger.info("开始查询报警事件列表:status:{}", s);        List<DeviceWarnEvent> events = warnEventService.findByTenantId(s);        return AjaxResult.NewAjaxResult(events);    }    @RequestMapping("ajax/handler")    @ResponseBody    public AjaxResult<DeviceWarnEvent> hanler(Integer handlerType, Long warnId, String msg) {        logger.info("开始处理报警事件wanrid:{},handlerType:{},msg:{}", warnId, handlerType, msg);        warnEventService.updateWarn(warnId, handlerType, msg);        DeviceWarnEvent e = warnEventService.findOne(warnId);        return AjaxResult.NewAjaxResult(e);    }}