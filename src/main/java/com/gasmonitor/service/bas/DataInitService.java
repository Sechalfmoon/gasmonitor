package com.gasmonitor.service.bas;import com.gasmonitor.dao.TenantRepository;import com.gasmonitor.entity.Tenant;import com.gasmonitor.entity.User;import com.gasmonitor.pros.Role;import com.gasmonitor.service.user.UserService;import com.gasmonitor.utils.Pinyin;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.ArrayList;import java.util.List;/** * Created by saplmm on 2017/9/1. */@Servicepublic class DataInitService {    @Autowired    private UserService userService;    @Autowired    private TenantRepository tenantRepository;    @Transactional    public List<User> initTenantUser() {        List<User> ret = new ArrayList<>();        List<Tenant> tenants = tenantRepository.findAll();        for (Tenant t : tenants) {            try {                User user = new User();                user.setUsername(Pinyin.getPinYinHeadChar(t.getCompany()) + t.getId() + "admin");                user.setPassword("123");// FIXME: 2017/8/28  暂时处理成密码为123                user.setRole(Role.ROLE_TENANTADMIN);//设置玩家角色                user.setTenantId(t.getId());//关联tenantId                User tuser = userService.newUser(user).getData().get(0);                ret.add(tuser);            } catch (Exception e) {                e.printStackTrace();            }        }        return ret;    }}