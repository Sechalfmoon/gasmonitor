/** * Created by saplmm on 2017/6/23. */layui.use(['laytpl', 'jquery', 'layer', 'laypage'], function () {        console.log("开始执行渲染模板");        var laytpl = layui.laytpl;        var $ = layui.jquery;        var getUrl = "/tenant/ajax/list";        var editUrl = '/tenant/ajax/update';        var rmUrl = '/tenant/ajax/rmUrl';        var layer = layui.layer;        var laypage = layui.laypage;        //第一次加载数据        searchList();        //添加一个租户        $(".newsAdd_btn").on('click', function () {            console.log("添加一个用户.弹出编辑框");            showEditLayer(true);        });        $(".search_btn").on('click', function () {            console.log("点击了搜索按钮，开始搜索");            searchList();        })        function initClickEvent() {            $("#h").on('click', function () {                alert("哈哈哈");            });            //为按钮设置事件            $(".tenant_edit").on('click', function () {                var that = this;                showEditLayer(false, $(that).data("sourceid"));            });            $(".tenant_del").on('click', function () {                console.log("开始删除租户的信息");            });        }        //显示编辑弹出层        function showEditLayer(newTenant, sourceId) {            console.log("开始编辑租户的信息:sourceId" + sourceId);            layer.open({                type: 1                , title: '编辑租户'                , area: ['400px', '400px']                , shadeClose: true //开启遮罩关闭                , maxmin: true                , content: $('#layer_tenant_edit') //这里content是一个DOM，注意：最好该元素要存放在body最外层，否则可能被其它的相对元素所影响                , btn: ['取消', '提交']                , success: function (layero, index) {                    console.log("打开编辑窗口成功，是否新增？" + newTenant)                    if (newTenant) {                        return;//如果是新增加用户，直接返回，不用天充值                    }                    //这里填充值                    $("#eidt_layer_name").val($("#source" + sourceId).data("name"));                    $("#eidt_layer_mobile").val($("#source" + sourceId).data("mobile"));                    $("#eidt_layer_address").val($("#source" + sourceId).data("address"));                    $("#eidt_layer_company").val($("#source" + sourceId).data("company"));                }                , yes: function (index, layero) {                    layer.close(index);                    console.log('点击了按钮1');                }                , btn2: function (index, layero) {                    console.log('点击了按钮2');                }                ,            });        }        function searchList(currPage) {            console.log("开始查询租户list的信息...");            layer.load();   //loading            $.get(                getUrl,                {"currPage": currPage || 1, "searchKey": $(".search_input").val()},                function (data) {                    console.log("查询到的玩家的list信息:" + JSON.stringify(data));                    laytpl(slist.innerHTML).render(data, function (html) {                        tableview.innerHTML = html;                        initClickEvent();   //渲染之后才能初始化按钮的信息，不然没有作用                        //分页                        laypage({                            cont: 'pageView'                            , pages: data.totalPage                            , skip: true                            , curr: currPage || 1 //当前页,                            , jump: function (obj, first) {                                if (!first) {                                    searchList(obj.curr)                                }                            }                        });                        layer.closeAll('loading');   //关闭所有的loading                    });                },                "json"            );        }    });